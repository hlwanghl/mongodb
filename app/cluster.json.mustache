{
   "name":{{cluster.name}},
   "description":{{cluster.description}},
   "vxnet":{{cluster.vxnet}},
   "backup_policy": "device",
   "incremental_backup_supported": true,
   "advanced_actions": ["change_vxnet", "scale_horizontal"],
   "nodes":[
      {
         "role":"replica",
         "container":{
            "type":"kvm",
            "zone":"pek3",
            "image":"img-1s8b25aj"
         },
         "instance_class":{{cluster.replica.instance_class}},
         "server_id_upper_bound": 255,
         "count":{{cluster.replica.count}},
         "cpu":{{cluster.replica.cpu}},
         "memory":{{cluster.replica.memory}},
         "volume":{
            "size":{{cluster.replica.volume_size}},
            "mount_point":"/data",
            "filesystem":"ext4"
         },
         "vertical_scaling_policy":"sequential",
         "services": {
			"start": {
				"cmd": "appctl start"
			},
			"init": {
            "post_start_service": true,
            "cmd": "appctl init"
			},
			"stop": {
				"cmd": "appctl stop"
			},
			"scale_out": {
				"cmd": "appctl scaleOut"
			},
			"scale_in": {
				"cmd": "appctl scaleIn"
			},
         "backup": {
            "nodes_to_execute_on": 1,
            "order": 1
         },
			"destroy": {
				"cmd": "echo"
			}
		}
	}],
   "display_tabs": {
      "Node Details": {
         "cmd": "appctl getRsMembers",
         "timeout": 10,
         "description": ""
      },
      "Connection String": {
         "cmd": "appctl getMongoUri",
         "timeout": 10,
         "description": ""
      }
   },
  "health_check": {
    "enable": true,
    "interval_sec": 60,
    "timeout_sec": 10,
    "action_timeout_sec": 30,
    "healthy_threshold": 2,
    "unhealthy_threshold": 2,
    "check_cmd": "appctl check",
    "action_cmd": "appctl revive"
  },
   "monitor":{
      "enable":true,
      "cmd":"appctl measure",
      "items":{
         "opcounters-query":{
            "unit":"times",
            "value_type":"int",
            "statistics_type":"delta",
            "scale_factor_when_display":1
         },
         "opcounters-update":{
            "unit":"times",
            "value_type":"int",
            "statistics_type":"delta",
            "scale_factor_when_display":1
         },
         "opcounters-insert":{
            "unit":"times",
            "value_type":"int",
            "statistics_type":"delta",
            "scale_factor_when_display":1
         },
         "opcounters-delete":{
            "unit":"times",
            "value_type":"int",
            "statistics_type":"delta",
            "scale_factor_when_display":1
         },
         "opcounters-total":{
            "unit":"times",
            "value_type":"int",
            "statistics_type":"delta",
            "scale_factor_when_display":1
         },
         "opcountersRepl-query":{
            "unit":"times",
            "value_type":"int",
            "statistics_type":"delta",
            "scale_factor_when_display":1
         },
         "opcountersRepl-total":{
            "unit":"times",
            "value_type":"int",
            "statistics_type":"delta",
            "scale_factor_when_display":1
         },
         "opcountersRepl-delete":{
            "unit":"times",
            "value_type":"int",
            "statistics_type":"delta",
            "scale_factor_when_display":1
         },
         "opcountersRepl-insert":{
            "unit":"times",
            "value_type":"int",
            "statistics_type":"delta",
            "scale_factor_when_display":1
         },
         "opcountersRepl-update":{
            "unit":"times",
            "value_type":"int",
            "statistics_type":"delta",
            "scale_factor_when_display":1
         },
         "cache-usage":{
            "unit":"Pecent(%)",
            "value_type":"int",
            "statistics_type":"latest",
            "scale_factor_when_display":0.01
         },
         "wiredTiger-cache-tracked-dirty-pages-in-the-cache":{
            "unit":"MB",
            "value_type":"int",
            "statistics_type":"latest",
            "scale_factor_when_display":1
         },
         "wiredTiger-cache-bytes-read-into-cache":{
            "unit":"MB",
            "value_type":"int",
            "statistics_type":"delta",
            "scale_factor_when_display":1
         },
         "wiredTiger-cache-bytes-written-from-cache":{
            "unit":"MB",
            "value_type":"int",
            "statistics_type":"delta",
            "scale_factor_when_display":1
         },
         "wiredTiger-concurrentTransactions-write-out":{
            "unit":"times",
            "value_type":"int",
            "statistics_type":"latest",
            "scale_factor_when_display":1
         },
         "wiredTiger-concurrentTransactions-write-available":{
            "unit":"times",
            "value_type":"int",
            "statistics_type":"latest",
            "scale_factor_when_display":1
         },
         "wiredTiger-concurrentTransactions-read-out":{
            "unit":"times",
            "value_type":"int",
            "statistics_type":"latest",
            "scale_factor_when_display":1
         },
         "wiredTiger-concurrentTransactions-read-available":{
            "unit":"times",
            "value_type":"int",
            "statistics_type":"latest",
            "scale_factor_when_display":1
         },
         "network-bytesIn":{
            "unit":"MB",
            "value_type":"int",
            "statistics_type":"delta",
            "scale_factor_when_display":1
         },
         "network-bytesOut":{
            "unit":"MB",
            "value_type":"int",
            "statistics_type":"delta",
            "scale_factor_when_display":1
         },
         "network-physicalBytesIn":{
            "unit":"MB",
            "value_type":"int",
            "statistics_type":"delta",
            "scale_factor_when_display":1
         },
         "network-physicalBytesOut":{
            "unit":"MB",
            "value_type":"int",
            "statistics_type":"delta",
            "scale_factor_when_display":1
         },
         "connections-current":{
            "unit":"",
            "value_type":"int",
            "statistics_type":"latest",
            "scale_factor_when_display":1
         },
         "connections-totalCreated":{
            "unit":"",
            "value_type":"int",
            "statistics_type":"delta",
            "scale_factor_when_display":1
         },
         "connections-available":{
            "unit":"",
            "value_type":"int",
            "statistics_type":"latest",
            "scale_factor_when_display":1
         },
         "globalLock-activeClients-writers":{
            "unit":"",
            "value_type":"int",
            "statistics_type":"latest",
            "scale_factor_when_display":1
         },
         "globalLock-activeClients-readers":{
            "unit":"",
            "value_type":"int",
            "statistics_type":"latest",
            "scale_factor_when_display":1
         },
         "globalLock-activeClients-total":{
            "unit":"",
            "value_type":"int",
            "statistics_type":"latest",
            "scale_factor_when_display":1
         },
         "globalLock-currentQueue-readers":{
            "unit":"",
            "value_type":"int",
            "statistics_type":"latest",
            "scale_factor_when_display":1
         },
         "globalLock-currentQueue-total":{
            "unit":"",
            "value_type":"int",
            "statistics_type":"latest",
            "scale_factor_when_display":1
         },
         "globalLock-currentQueue-writers":{
            "unit":"",
            "value_type":"int",
            "statistics_type":"latest",
            "scale_factor_when_display":1
         }

      },
      "groups":{
         "connections":[
            "connections-current",
            "connections-totalCreated",
            "connections-available"
         ],
         "globalLock-activeClients":[
            "globalLock-activeClients-writers",
            "globalLock-activeClients-readers",
            "globalLock-activeClients-total"
         ],
         "globalLock-currentQueue":[
            "globalLock-currentQueue-readers",
            "globalLock-currentQueue-total",
            "globalLock-currentQueue-writers"
         ],
         "network":[
            "network-bytesIn",
            "network-physicalBytesIn",
            "network-bytesOut",
            "network-physicalBytesOut"
         ],
         "opcountersRepl":[
            "opcountersRepl-insert",
            "opcountersRepl-query",
            "opcountersRepl-update",
            "opcountersRepl-delete"
         ],
         "opcounters":[
            "opcounters-insert",
            "opcounters-query",
            "opcounters-update",
            "opcounters-delete"
         ],
         "wiredTiger-cache-usage":[
            "cache-usage"
         ],
         "wiredTiger-cache":[
            "wiredTiger-cache-tracked-dirty-pages-in-the-cache",
            "wiredTiger-cache-bytes-read-into-cache",
            "wiredTiger-cache-bytes-written-from-cache"
         ],
         "wiredTiger-concurrentTransactions":[
            "wiredTiger-concurrentTransactions-write-out",
            "wiredTiger-concurrentTransactions-write-available",
            "wiredTiger-concurrentTransactions-read-out",
            "wiredTiger-concurrentTransactions-read-available"
         ]
      },
      "display":[
         "opcounters",
         "opcountersRepl",
         "connections",
         "wiredTiger-cache-usage",
         "wiredTiger-cache",
         "wiredTiger-concurrentTransactions",
         "globalLock-activeClients",
         "globalLock-currentQueue",
         "network"
      ],
      "alarm":[
         "connections-current",
         "connections-available",
         "cache-usage"
      ]
   },
   "env": {
      "user": {{env.user}},
      "passwd": {{env.passwd}},
      "caddy_user":{{env.caddy_user}},
      "caddy_password":{{env.caddy_password}},
      "rsName": {{env.rsName}},
      "maxConns": {{env.maxConns}},
      "oplogSize": {{env.oplogSize}},
      "port": {{env.port}}
   }
}